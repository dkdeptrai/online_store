<div class="w-full">
	<% if notice.present? %>
		<p class="mb-5 inline-block rounded-lg bg-green-50 px-3 py-2 font-medium text-green-500 notice">
			<%= notice %>
		</p>
	<% end %>
	<h1>Products Catalog</h1>
	<% if session[:counter] >= 5 %>
	<p class="my-4">You have visited this page <%= pluralize(session[:counter], 'time') %> since last product was added to cart</p>
	<% end %>
	<ul>
		<%= cache @products do %>

			<% @products.each do |product| %>
				<%= cache product do %>

					<li class="mb-6 flex flex-row">
						<%= image_tag(product.images.first.url, class: "object-center w-48 mr-6") %>
						<div>
							<h2><%= product.name %></h2>
							<p><%= sanitize(product.description) %></p>
							<p><%= product.brand.name %></p>
							<p><%= product.category.name %></p>
							<p><%= product.heel_height %></p>
							<div class="mt-3 flex flex-row items-center">
								<p><%= number_to_currency(product.price) %></p>
								<%= button_to 'Add to Cart',
								              line_items_path(product_id: product),
								              form_class: "inline",
								              class: "ml-4 rounded-lg py-1 px-2 bg-green-600 text-white " %>
							</div>
						</div>
					</li>
				<% end %>
			<% end %>
		<% end %>
	</ul>
</div>

